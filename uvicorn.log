INFO:     Will watch for changes in these directories: ['/Users/ruddroroy/Downloads/satlink-planner']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [43348] using StatReload
INFO:     Started server process [43397]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Starting SatLink Planner API…
[DB] Creating all tables via SQLAlchemy metadata …
[DB] Tables created.
INFO:     127.0.0.1:51662 - "GET /health HTTP/1.1" 200 OK
WARNING:  StatReload detected changes in 'apps/api/main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [43397]
Shutting down SatLink Planner API...
INFO:     Started server process [43798]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Starting SatLink Planner API…
[DB] Creating all tables via SQLAlchemy metadata …
[DB] Tables created.
INFO:     127.0.0.1:51791 - "GET /api/docs HTTP/1.1" 200 OK
/Users/ruddroroy/Library/Python/3.11/lib/python/site-packages/fastapi/openapi/utils.py:207: UserWarning: Duplicate Operation ID root__get for function root at /Users/ruddroroy/Downloads/satlink-planner/apps/api/main.py
  warnings.warn(message, stacklevel=1)
INFO:     127.0.0.1:51791 - "GET /api/openapi.json HTTP/1.1" 200 OK
INFO:     127.0.0.1:51792 - "GET /api/docs HTTP/1.1" 200 OK
INFO:     127.0.0.1:51792 - "GET /api/openapi.json HTTP/1.1" 200 OK
INFO:     127.0.0.1:51822 - "GET /api/v1/passes/?norad_id=25544&lat=90&lon=180&elevation=0&mask=10&max_passes=10 HTTP/1.1" 500 Internal Server Error
WARNING:  StatReload detected changes in 'apps/api/domain/models.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [43798]
Shutting down SatLink Planner API...
Process SpawnProcess-3:
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/Users/ruddroroy/Library/Python/3.11/lib/python/site-packages/uvicorn/_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
  File "/Users/ruddroroy/Library/Python/3.11/lib/python/site-packages/uvicorn/server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/Users/ruddroroy/Library/Python/3.11/lib/python/site-packages/uvicorn/server.py", line 69, in serve
    config.load()
  File "/Users/ruddroroy/Library/Python/3.11/lib/python/site-packages/uvicorn/config.py", line 458, in load
    self.loaded_app = import_from_string(self.app)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ruddroroy/Library/Python/3.11/lib/python/site-packages/uvicorn/importer.py", line 21, in import_from_string
    module = importlib.import_module(module_str)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/importlib/__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 940, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "/Users/ruddroroy/Downloads/satlink-planner/apps/api/main.py", line 12, in <module>
    from api.v1.api import api_router
  File "/Users/ruddroroy/Downloads/satlink-planner/apps/api/api/v1/api.py", line 2, in <module>
    from api.v1.endpoints import passes, margin, export
  File "/Users/ruddroroy/Downloads/satlink-planner/apps/api/api/v1/endpoints/passes.py", line 8, in <module>
    from domain.repositories import get_repository
  File "/Users/ruddroroy/Downloads/satlink-planner/apps/api/domain/repositories.py", line 7, in <module>
    from .models import Base
  File "/Users/ruddroroy/Downloads/satlink-planner/apps/api/domain/models.py", line 8, in <module>
    Base = declarative_base()
           ^^^^^^^^^^^^^^^^
NameError: name 'declarative_base' is not defined
WARNING:  StatReload detected changes in 'apps/api/domain/models.py'. Reloading...
INFO:     Started server process [44419]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'apps/api/api/v1/endpoints/passes.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [44419]
Starting SatLink Planner API…
[DB] Creating all tables via SQLAlchemy metadata …
[DB] Initialisation failed: (in table 'link_budget_profiles', column 'other_margins_db'): Compiler <sqlalchemy.dialects.sqlite.base.SQLiteTypeCompiler object at 0x1057ca790> can't render element of type JSONB
Shutting down SatLink Planner API...
INFO:     Started server process [44423]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'apps/api/api/v1/endpoints/export.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [44423]
Starting SatLink Planner API…
[DB] Creating all tables via SQLAlchemy metadata …
[DB] Initialisation failed: (in table 'link_budget_profiles', column 'other_margins_db'): Compiler <sqlalchemy.dialects.sqlite.base.SQLiteTypeCompiler object at 0x104a55910> can't render element of type JSONB
Shutting down SatLink Planner API...
INFO:     Started server process [44426]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'apps/api/api/v1/endpoints/margin.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [44426]
Starting SatLink Planner API…
[DB] Creating all tables via SQLAlchemy metadata …
[DB] Initialisation failed: (in table 'link_budget_profiles', column 'other_margins_db'): Compiler <sqlalchemy.dialects.sqlite.base.SQLiteTypeCompiler object at 0x10518da50> can't render element of type JSONB
Shutting down SatLink Planner API...
INFO:     Started server process [44437]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'apps/api/domain/models.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [44437]
Starting SatLink Planner API…
[DB] Creating all tables via SQLAlchemy metadata …
[DB] Initialisation failed: (in table 'link_budget_profiles', column 'other_margins_db'): Compiler <sqlalchemy.dialects.sqlite.base.SQLiteTypeCompiler object at 0x104c91fd0> can't render element of type JSONB
Shutting down SatLink Planner API...
Process SpawnProcess-8:
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/Users/ruddroroy/Library/Python/3.11/lib/python/site-packages/uvicorn/_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
  File "/Users/ruddroroy/Library/Python/3.11/lib/python/site-packages/uvicorn/server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/Users/ruddroroy/Library/Python/3.11/lib/python/site-packages/uvicorn/server.py", line 69, in serve
    config.load()
  File "/Users/ruddroroy/Library/Python/3.11/lib/python/site-packages/uvicorn/config.py", line 458, in load
    self.loaded_app = import_from_string(self.app)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ruddroroy/Library/Python/3.11/lib/python/site-packages/uvicorn/importer.py", line 21, in import_from_string
    module = importlib.import_module(module_str)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/importlib/__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 940, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "/Users/ruddroroy/Downloads/satlink-planner/apps/api/main.py", line 12, in <module>
    from api.v1.api import api_router
  File "/Users/ruddroroy/Downloads/satlink-planner/apps/api/api/v1/api.py", line 2, in <module>
    from api.v1.endpoints import passes, margin, export
  File "/Users/ruddroroy/Downloads/satlink-planner/apps/api/api/v1/endpoints/passes.py", line 8, in <module>
    from domain.repositories import get_repository
  File "/Users/ruddroroy/Downloads/satlink-planner/apps/api/domain/repositories.py", line 7, in <module>
    from .models import Base
  File "/Users/ruddroroy/Downloads/satlink-planner/apps/api/domain/models.py", line 54, in <module>
    class LinkBudgetProfile(Base):
  File "/Users/ruddroroy/Downloads/satlink-planner/apps/api/domain/models.py", line 68, in LinkBudgetProfile
    other_margins_db = Column(JSONB, default={})  # Additional margins
                              ^^^^^
NameError: name 'JSONB' is not defined
WARNING:  StatReload detected changes in 'apps/api/domain/models.py'. Reloading...
INFO:     Started server process [47156]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'apps/api/domain/models.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [47156]
Starting SatLink Planner API…
[DB] Creating all tables via SQLAlchemy metadata …
[DB] Tables created.
Shutting down SatLink Planner API...
INFO:     Started server process [47705]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Starting SatLink Planner API…
[DB] Creating all tables via SQLAlchemy metadata …
[DB] Tables created.
INFO:     127.0.0.1:55433 - "GET /api/docs HTTP/1.1" 200 OK
/Users/ruddroroy/Library/Python/3.11/lib/python/site-packages/fastapi/openapi/utils.py:207: UserWarning: Duplicate Operation ID root__get for function root at /Users/ruddroroy/Downloads/satlink-planner/apps/api/main.py
  warnings.warn(message, stacklevel=1)
INFO:     127.0.0.1:55433 - "GET /api/openapi.json HTTP/1.1" 200 OK
INFO:     127.0.0.1:55495 - "GET /api/v1/passes/?norad_id=25544&lat=90&lon=180&elevation=0&mask=10&max_passes=10 HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55522 - "GET /api/v1/passes HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:55522 - "GET /api/v1/passes/ HTTP/1.1" 422 Unprocessable Entity
INFO:     127.0.0.1:55522 - "GET /favicon.ico HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55522 - "GET /api/v1/passes/ HTTP/1.1" 422 Unprocessable Entity
INFO:     127.0.0.1:56160 - "GET /api/v1/margin/?norad_id=25544&lat=40.6413&lon=77.7781&elevation=13&band=ku&rain_rate_mmh=0&tx_power_dbm=40&tx_antenna_gain_dbi=30&bandwidth_mhz=10&start_time=2025-08-07T12%3A00%3A00&end_time=2025-08-07T12%3A30%3A00&step_s=60 HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56166 - "GET /api/v1/passes/ HTTP/1.1" 422 Unprocessable Entity
INFO:     127.0.0.1:56166 - "GET /api/v1/passes/ HTTP/1.1" 422 Unprocessable Entity
INFO:     127.0.0.1:56166 - "GET /api/v1/passes/ HTTP/1.1" 422 Unprocessable Entity
INFO:     127.0.0.1:56166 - "GET /api/v1/passes/ HTTP/1.1" 422 Unprocessable Entity
INFO:     127.0.0.1:56170 - "GET /api/v1/passes/ HTTP/1.1" 422 Unprocessable Entity
INFO:     127.0.0.1:57906 - "GET /api/docs HTTP/1.1" 200 OK
INFO:     127.0.0.1:57906 - "GET /api/openapi.json HTTP/1.1" 200 OK
WARNING:  StatReload detected changes in 'backend/main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [47705]
Shutting down SatLink Planner API...
INFO:     Started server process [65360]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'tests/test_health.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [65360]
Starting SatLink Planner API…
[DB] Creating all tables via SQLAlchemy metadata …
[DB] Tables created.
Shutting down SatLink Planner API...
INFO:     Started server process [65404]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'backend/db.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [65404]
Starting SatLink Planner API…
[DB] Creating all tables via SQLAlchemy metadata …
[DB] Tables created.
Shutting down SatLink Planner API...
INFO:     Started server process [67190]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in '.venv/lib/python3.11/site-packages/pip/__init__.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [67190]
Starting SatLink Planner API…
[DB] Creating all tables via SQLAlchemy metadata …
[DB] Tables created.
Shutting down SatLink Planner API...
INFO:     Started server process [67663]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Starting SatLink Planner API…
[DB] Creating all tables via SQLAlchemy metadata …
[DB] Tables created.
INFO:     127.0.0.1:51092 - "GET /api/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:51134 - "GET /api/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:51180 - "GET /openapi.json HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:51228 - "GET /api/health HTTP/1.1" 404 Not Found
WARNING:  StatReload detected changes in 'backend/config.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [67663]
Shutting down SatLink Planner API...
INFO:     Started server process [69324]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Starting SatLink Planner API…
[DB] Creating all tables via SQLAlchemy metadata …
[DB] Tables created.
INFO:     127.0.0.1:51372 - "GET /api/health HTTP/1.1" 404 Not Found
WARNING:  StatReload detected changes in '.venv/lib/python3.9/site-packages/pip/__init__.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [69324]
Shutting down SatLink Planner API...
INFO:     Started server process [70928]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in '.venv/lib/python3.9/site-packages/pip/__init__.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [70928]
Starting SatLink Planner API…
[DB] Creating all tables via SQLAlchemy metadata …
[DB] Tables created.
Shutting down SatLink Planner API...
INFO:     Started server process [70936]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Starting SatLink Planner API…
[DB] Creating all tables via SQLAlchemy metadata …
[DB] Tables created.
INFO:     127.0.0.1:51528 - "GET /api/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:51539 - "GET /docs HTTP/1.1" 404 Not Found
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [70936]
Shutting down SatLink Planner API...
INFO:     Stopping reloader process [43348]
